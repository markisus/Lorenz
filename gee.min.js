window.GEE=function(b){b||(b={});if(document.createElement("canvas").getContext){var d=this,g={},c={ctx:undefined,domElement:undefined,width:undefined,height:undefined,desiredFrameTime:1E3/60,frameCount:0,key:undefined,keyCode:undefined,mouseX:0,mouseY:0,pmouseX:undefined,pmouseY:undefined,mousePressed:false},h=undefined,e,i=function(){for(var a=e,f=0,l=0;a;){l+=a.offsetTop;f+=a.offsetLeft;a=a.offsetParent}offset={x:f,y:l}};b.context||(b.context="2d");b.width||(b.width=500);b.height||(b.height=500);
e=c.domElement=document.createElement("canvas");c.ctx=e.getContext(b.context);if(c.ctx==null)b.fallback&&b.fallback();else{if(b.fullscreen){var m=function(){i();c.width=e.width=window.innerWidth;c.height=e.height=window.innerHeight-4};window.addEventListener("resize",m,false);m();b.container||(b.container=document.body);document.body.style.margin="0px";document.body.style.padding="0px"}else{i();d.__defineSetter__("width",function(a){c.width=e.width=a});d.__defineSetter__("height",function(a){c.height=
e.height=a});d.width=b.width;d.height=b.height}if(b.container){b.container.appendChild(e);i()}b=function(a){d.__defineGetter__(a,function(){return c[a]})};b("ctx");b("width");b("height");b("frameCount");b("key");b("keyCode");b("mouseX");b("mouseY");b("pmouseX");b("pmouseY");b("mousePressed");b=function(){};d.loop=true;d.keyup=b;d.keydown=b;d.draw=b;d.mousedown=b;d.mouseup=b;d.mousemove=b;d.mousedrag=b;d.__defineGetter__("frameRate",function(){return 1E3/h});d.__defineGetter__("frameTime",function(){return h});
d.__defineGetter__("keyPressed",function(){for(var a in g)if(g[a])return true;return false});d.__defineSetter__("frameTime",function(a){c.desiredFrameTime=a});d.__defineSetter__("frameRate",function(a){c.desiredFrameTime=k/a});e.addEventListener("mouseenter",function(){i()},false);var j=function(){d.mousemove()};e.addEventListener("mousemove",function(a){var f=a.pageX-offset.x;a=a.pageY-offset.y;if(c.pmouseX==undefined){c.pmouseX=f;c.pmouseY=a}else{c.pmouseX=c.mouseX;c.pmouseY=c.mouseY}c.mouseX=f;
c.mouseY=a},false);e.addEventListener("mousemove",j,false);e.addEventListener("mousedown",function(){c.mousePressed=true;d.mousedown();e.addEventListener("mousemove",d.mousedrag,false);e.removeEventListener("mousemove",j,false)},false);e.addEventListener("mouseup",function(){c.mousePressed=false;d.mouseup();e.removeEventListener("mousemove",d.mousedrag,false);e.addEventListener("mousemove",j,false)},false);window.addEventListener("keydown",function(a){a=a.keyCode;c.key=String.fromCharCode(a);c.keyCode=
a;g[a]=true;d.keydown()},false);window.addEventListener("keyup",function(a){a=a.keyCode;c.key=String.fromCharCode(a);c.keyCode=a;g[a]=false;d.keyup()},false);var n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,h)}}();_idraw=function(){d.loop&&n(_idraw);c.frameCount++;var a=(new Date).getTime();d.draw();a=(new Date).getTime()-a;h=a>c.desiredFrameTime?
a:c.desiredFrameTime};_idraw()}}else b.fallback&&b.fallback()};

